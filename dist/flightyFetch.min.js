(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==="object"&&typeof module==="object")module.exports=factory();else if(typeof define==="function"&&define.amd)define([],factory);else if(typeof exports==="object")exports["flightyFetch"]=factory();else root["flightyFetch"]=factory()})(this,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p="";return __webpack_require__(0)}([function(module,exports){"use strict";var __extends=this&&this.__extends||function(d,b){for(var p in b)if(b.hasOwnProperty(p))d[p]=b[p];function __(){this.constructor=d}d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)};function flightyFetchAsync(input,options){function promiseCallback(resolve,reject){var request;if(Request.prototype.isPrototypeOf(input)&&!options){request=input}else{request=new Request(input,options)}var cancellationPromise;if(options){cancellationPromise=options.cancellationPromise}var xhr=new XMLHttpRequest;xhr.onload=function(){try{var status=xhr.status;if(xhr.status===1223){status=204}if(status<100||status>=600){reject(new TypeError("Network request failed"));return}var responseBody;if("response"in xhr){responseBody=xhr.response}else{responseBody=xhr.responseText}if(status!=200){responseBody=clearBodyIfEmpty(responseBody)}var responseHeaders=parseResponseHeaders(xhr);var responseOptions={status:status,statusText:xhr.statusText,headers:responseHeaders,url:xhr.responseURL};var response=new Response(responseBody,responseOptions);resolve(response)}catch(e){reject(e)}};xhr.onerror=function(){reject(new TypeError("Network request failed"))};xhr.ontimeout=function(){reject(new TypeError("Network request failed"))};xhr.onabort=function(){reject(new CancellationError("The request was cancelled"))};xhr.open(request.method,request.url,true);if(typeof request.headers.forEach==="function"){request.headers.forEach(function(value,name){xhr.setRequestHeader(name,value)})}else if(typeof request.headers.entries==="function"){for(var _i=0,_a=request.headers.entries();_i<_a.length;_i++){var pair=_a[_i];xhr.setRequestHeader(pair[0],pair[1])}}if(request.credentials==="include"){xhr.withCredentials=true}if("responseType"in xhr&&typeof request.blob==="function"){xhr.responseType="blob"}if(cancellationPromise&&typeof cancellationPromise.then==="function"){cancellationPromise.then(function(isCancelled){if(isCancelled!==false){xhr.abort()}}).catch(function(e){})}getRequestDataAsync(request).then(function(data){try{xhr.send(data)}catch(e){reject(e)}}).catch(function(e){reject(e)})}return new Promise(function(resolve,reject){try{promiseCallback(resolve,reject)}catch(e){reject(e)}})}Object.defineProperty(exports,"__esModule",{value:true});exports.default=flightyFetchAsync;function parseResponseHeaders(xhr){var result=new Headers;var headerStrings=(xhr.getAllResponseHeaders()||"").trim().split("\n");for(var _i=0,headerStrings_1=headerStrings;_i<headerStrings_1.length;_i++){var headerString=headerStrings_1[_i];var separatorIndex=headerString.indexOf(":");if(separatorIndex<0){continue}var name_1=headerString.substr(0,separatorIndex).trim();var value=headerString.substr(separatorIndex+1).trim();try{result.append(name_1,value)}catch(e){}}return result}function getRequestDataAsync(request){if("_bodyInit"in request){return Promise.resolve(request._bodyInit)}var result;var contentType=parseContentType(request)||"";if(stringStartsWith(contentType,"text/")){result=request.text()}else if(typeof request.blob==="function"){result=request.blob()}else{result=request.text()}result=result.then(clearBodyIfEmpty);return result}function parseContentType(request){if(!request||!request.headers)return null;var contentType=request.headers.get("content-type");if(!contentType)return null;var paramSeparatorIndex=contentType.indexOf(";");if(paramSeparatorIndex>=0){contentType=contentType.substr(0,paramSeparatorIndex).trim()}contentType=contentType.toLowerCase();return contentType}function clearBodyIfEmpty(bodyInit){var modifiedBodyInit=bodyInit;if(modifiedBodyInit){if(typeof bodyInit.size==="number"&&bodyInit.size===0){modifiedBodyInit=undefined}else if(typeof bodyInit.length==="number"&&bodyInit.length===0){modifiedBodyInit=undefined}}return modifiedBodyInit}function stringStartsWith(str,searchString){if(typeof str.startsWith==="function"){return str.startsWith(searchString)}return str.substr(0,searchString.length)===searchString}var CancellationError=function(_super){__extends(CancellationError,_super);function CancellationError(message){_super.call(this,message);this.message=message;this.name="CancellationError";this.message=message}CancellationError.prototype.toString=function(){return this.name+": "+this.message};return CancellationError}(Error)}])});
//# sourceMappingURL=flightyFetch.min.js.map